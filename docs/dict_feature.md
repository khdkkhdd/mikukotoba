# 단어장 기능 명세서

> ミク言葉 - 사전(단어장) 기능의 사용자 관점 기능 명세
> 작성일: 2026-02-19

---

## 1. 기능 개요

웹 브라우징 중 만난 일본어 단어를 수집·관리·학습할 수 있는 단어장 기능.

**핵심 가치**: "보고 → 저장하고 → 복습한다"의 학습 사이클을 브라우저 안에서 완결

---

## 2. 단어 추가

### 2.1 추가 방법

웹페이지에서 일본어 텍스트를 드래그 선택한 뒤 우클릭하면, 컨텍스트 메뉴에 **"JP 단어장에 추가"** 항목이 나타난다.

### 2.2 자동 분석

메뉴를 클릭하면 모달이 나타나며, 선택한 텍스트에 대해 다음 정보가 자동으로 채워진다:

| 항목 | 설명 | 예시 |
|------|------|------|
| **단어** | 선택한 단어의 사전 기본형 | `食べました` → `食べる` |
| **읽기** | 히라가나 읽기 | `たべる` |
| **로마자** | 로마자 표기 | `taberu` |
| **뜻** | 한국어 번역 | `먹다` |
| **품사** | 일본어 품사 | `動詞` |
| **예문** | 선택 위치 주변의 문장을 자동 캡처 | `私は毎日ご飯を食べる。` |

- **기본형 자동 변환**: 활용형(과거형, て형 등)을 선택해도 사전 기본형으로 자동 변환된다.
- **로딩 표시**: 분석 중에는 스피너와 "분석 중..." 메시지가 표시된다.

### 2.3 사용자 수정 및 저장

자동 분석 결과가 채워진 후, 사용자는 모든 필드를 자유롭게 수정할 수 있다. 추가로 **메모** 필드에 개인 노트를 입력할 수 있다.

**모달 닫기**: ESC 키, 취소 버튼, 또는 오버레이 바깥 클릭

### 2.4 저장되는 정보

| 항목 | 자동 채움 | 사용자 입력 |
|------|----------|------------|
| 단어 | O | 수정 가능 |
| 읽기 (히라가나) | O | 수정 가능 |
| 로마자 | O | 수정 가능 |
| 뜻 (한국어) | O | 수정 가능 |
| 품사 | O | 수정 가능 |
| 예문 | O (주변 문장) | 수정 가능 |
| 메모 | X | 직접 입력 |
| 출처 URL | O (현재 페이지) | 수정 불가 |
| 추가 날짜 | O (자동) | 수정 불가 |

---

## 3. 단어장 열기

팝업(확장 아이콘 클릭)의 📖 버튼을 클릭하면 새 탭에서 단어장 페이지가 열린다.

---

## 4. 단어 목록 보기

### 4.1 날짜별 그룹핑

단어는 **추가한 날짜** 기준으로 그룹핑되어 표시된다.
- 최신 날짜가 맨 위에 온다.
- 각 날짜 그룹 옆에 해당 날짜의 단어 수가 표시된다. (예: `2025-02-19  3개`)
- 같은 날짜 안에서도 나중에 추가한 단어가 위에 온다.

### 4.2 카드 표시 항목

각 단어는 카드 형태로 표시되며, 다음 정보를 보여준다:

- **단어** (큰 글씨, 흰색)
- **읽기** (히라가나)
- **로마자** (파란색)
- **품사** (회색 배지)
- **뜻** (노란색)
- **예문** (이탤릭, 왼쪽 인용선)
- **메모** (있는 경우)
- **출처** (호스트명만 링크로 표시, 새 탭에서 열림)
- **편집 / 삭제 버튼**

### 4.3 페이지네이션

- 처음에는 최근 **7일**분의 단어만 로드된다.
- 하단의 **"더 보기"** 버튼을 누르면 **7일**씩 추가 로드된다.
- 더 불러올 날짜가 없으면 버튼이 사라진다.

### 4.4 빈 상태

단어가 하나도 없을 때는 안내 메시지가 표시된다:
> 아직 저장된 단어가 없습니다.
> 웹페이지에서 일본어 텍스트를 선택한 후 우클릭 → "JP 단어장에 추가"로 단어를 추가하세요.

### 4.5 총 단어 수

헤더 우측에 전체 저장된 단어 수가 표시된다. (예: `42개`)

---

## 5. 퀴즈(시험) 모드

### 5.1 모드 종류

헤더에 3개의 모드 전환 버튼이 있다:

| 모드 | 버튼 라벨 | 동작 |
|------|----------|------|
| **일반** | 일반 | 모든 정보를 그대로 표시 (기본값) |
| **뜻 맞추기** | 뜻 맞추기 | 단어를 보고 뜻을 맞추는 모드 |
| **단어 맞추기** | 단어 맞추기 | 뜻을 보고 단어를 맞추는 모드 |

### 5.2 숨겨지는 정보

**뜻 맞추기 모드**: 단어는 보이고, 뜻·읽기·로마자가 "클릭하여 확인"으로 숨겨진다.

**단어 맞추기 모드**: 뜻은 보이고, 단어·읽기·로마자가 "클릭하여 확인"으로 숨겨진다.

### 5.3 정답 확인

카드를 클릭하면 숨겨진 정보가 나타난다. 다시 클릭하면 숨겨진다.

### 5.4 퀴즈 모드 제약

- 예문과 출처는 힌트가 될 수 있으므로 표시되지 않는다.
- 편집/삭제 버튼도 비활성화된다.
- 뜻 맞추기에서는 메모도 숨겨진다 (정답 힌트 방지).

---

## 6. 검색

### 6.1 검색 대상

헤더의 검색창에 입력하면 다음 필드에서 일치하는 단어를 찾는다:

- 단어, 뜻, 읽기, 로마자, 예문, 메모

### 6.2 검색 동작

- 입력 즉시(약간의 지연 후) 결과가 갱신된다.
- 결과는 날짜별 그룹핑이 유지된다.
- 일치하는 텍스트 부분이 **파란색 하이라이트**로 강조된다.
- 결과가 없으면 `"○○"에 대한 결과가 없습니다.` 메시지가 표시된다.
- 검색어를 지우면 원래 목록으로 돌아간다.

### 6.3 퀴즈 모드와의 조합

검색 상태에서도 퀴즈 모드를 적용할 수 있다. 모드를 전환하면 검색 결과가 해당 모드로 다시 렌더링된다.

---

## 7. 편집

### 7.1 편집 시작

카드의 **편집** 버튼을 클릭하면 카드가 인라인 편집 모드로 전환된다.

### 7.2 편집 가능 항목

- 단어, 읽기, 로마자, 뜻, 품사, 예문, 메모

(추가 날짜, 출처 URL은 수정 불가)

### 7.3 저장/취소

- **저장**: 변경사항이 즉시 반영되고 카드가 업데이트된다.
- **취소**: 원래 내용으로 복원된다.

---

## 8. 삭제

### 8.1 삭제 확인

카드의 **삭제** 버튼을 클릭하면 확인 다이얼로그가 나타난다:
> "食べる" 을(를) 삭제하시겠습니까?
> [취소] [삭제]

### 8.2 삭제 후 동작

- 카드가 즉시 목록에서 사라진다.
- 총 단어 수가 업데이트된다.
- 모든 단어가 삭제되면 빈 상태 안내가 표시된다.

---

## 9. 내보내기 (Export)

### 9.1 형식

헤더의 **"내보내기"** 버튼을 클릭하면 전체 단어장이 **JSON 파일**로 다운로드된다.

### 9.2 파일명

`jp-vocab-YYYY-MM-DD.json` (다운로드 당일 날짜)

### 9.3 가져오기 (Import)

**현재 미구현.** 내보내기만 가능하다.

---

## 10. 제한사항

| 항목 | 설명 |
|------|------|
| 가져오기 없음 | 내보낸 JSON을 다시 불러오는 기능이 없음 |
| 중복 검사 없음 | 같은 단어를 여러 번 추가 가능 |
| 디바이스 동기화 없음 | 단어장은 현재 브라우저에만 저장됨 |
| 정렬 옵션 없음 | 항상 날짜순(최신 우선)으로만 표시 |
| 태그/분류 없음 | 단어를 주제별로 묶는 기능이 없음 |
| 벌크 작업 없음 | 여러 단어를 한번에 선택/삭제/편집 불가 |
| 번역기 의존 | 번역 엔진(API 키)이 설정되지 않으면 자동 분석 실패 |

---

## 11. To-Do: 학습 효과 개선을 위한 추가 기능 제안

### 높은 우선순위

| 기능 | 설명 | 근거 |
|------|------|------|
| **JSON Import** | 내보낸 파일을 다시 가져오기 | Export만 있으면 백업/복원 불가, 기본적인 데이터 관리 |
| **SRS (간격 반복)** | SM-2 등 알고리즘 기반 복습 스케줄링. 틀린 단어는 짧은 간격, 맞힌 단어는 긴 간격으로 반복 | 에빙하우스 망각 곡선에 기반한 가장 효율적인 암기 방법 |
| **중복 단어 감지** | 이미 저장된 단어를 추가하려 할 때 알림 또는 병합 제안 | 같은 단어 반복 축적 방지 |
| **JLPT 레벨 표시** | 각 단어에 N5~N1 레벨 자동 태깅 | "지금 내 수준이 어느 정도인지" 파악 가능 |

### 중간 우선순위

| 기능 | 설명 | 근거 |
|------|------|------|
| **태그/카테고리** | 사용자가 단어에 태그를 붙여 분류 (예: 음식, 여행, 비즈니스) | 주제별 집중 학습 |
| **타이핑 퀴즈** | 답을 클릭이 아닌 직접 입력으로 맞추는 모드 | 능동적 recall이 수동적 recognition보다 학습 효과 높음 |
| **읽기 맞추기 퀴즈** | 한자를 보고 히라가나 읽기를 맞추는 모드 | 한자 읽기는 일본어 학습의 핵심 난이도 |
| **학습 통계** | 일별/주별 추가 단어 수, 퀴즈 정답률, 연속 학습일 등 | 학습 동기 부여 및 진도 추적 |
| **음성 재생 (TTS)** | 단어/예문의 일본어 발음 듣기 | 청각 학습 채널 활용, 발음 확인 |
| **정렬 옵션** | 가나다순, 품사별, 추가순(기본) 등 | 다양한 관점에서 단어 확인 |

### 낮은 우선순위

| 기능 | 설명 | 근거 |
|------|------|------|
| **Anki Export** | Anki 형식 내보내기 | Anki 사용자가 기존 학습 도구와 연동 가능 |
| **벌크 삭제** | 체크박스로 여러 단어 한번에 삭제 | 대량 정리 편의성 |
| **관련 단어 추천** | 동의어/반의어/파생어 자동 제안 | 어휘 네트워크 확장 |
| **플래시카드 뷰** | 한 장씩 넘기는 전체화면 카드 UI | 집중 복습 모드 |
| **예문 자동 생성** | LLM으로 추가 예문 생성 | 다양한 문맥에서의 활용 학습 |
| **한자 부수/획수 정보** | 한자의 구성 요소 표시 | 한자 구조 이해 보조 |
| **필기 연습** | 캔버스에 한자 직접 쓰기 | 쓰기 학습 (현재는 읽기 전용) |
