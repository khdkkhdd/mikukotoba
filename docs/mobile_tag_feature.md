# 모바일 단어장 태그 기능 명세

> ミク言葉 모바일 앱의 태그 기반 단어 분류 및 필터 학습 기능.
> 확장 프로그램에서 이미 구현된 태그 시스템의 모바일 대응.

---

## 1. 기능 개요

확장 프로그램에서 태그를 붙여 저장한 단어를 모바일에서도 태그별로 분류/필터하여 학습할 수 있다.

**핵심 원칙:**
- 태그는 항상 선택사항 (태그 없이도 모든 기능 정상 동작)
- 기본 복습은 전체 통합 (SRS 인터리빙 효과 유지)
- 태그별 학습은 집중 학습이 필요할 때 보조적으로 사용

---

## 2. 데이터 동기화

### 2.1 태그 데이터 수신

확장에서 태그를 붙여 저장한 단어가 Google Drive를 통해 동기화되면, 모바일에도 태그가 자동 반영된다. 별도 설정이나 마이그레이션 없이 동작한다.

### 2.2 기존 단어 호환

태그 기능 이전에 저장된 단어는 태그가 빈 상태로 표시된다. 모바일에서 태그를 추가하면 다음 동기화 시 확장에도 반영된다.

---

## 3. 단어장 화면

### 3.1 태그 표시

각 단어 카드에 태그가 있으면 뜻 아래에 민트색 칩으로 표시된다.

```
┌─────────────────────────────────────┐
│ 食べる  たべる          動詞         │
│ 먹다                                │
│ [JLPT N4] [음식]                    │
└─────────────────────────────────────┘
```

태그가 없는 단어는 기존과 동일하게 표시된다.

### 3.2 태그 필터

단어장 상단에 현재 사용 중인 태그 목록이 칩으로 나타난다. 칩을 탭하면 해당 태그가 포함된 단어만 표시된다.

```
┌──────────────────────────────────────────┐
│ 단어장                        42개  📅   │
│                                          │
│ [전체] [JLPT N4] [음식] [드라마]         │
│                                          │
│ [검색...]                                │
│                                          │
│ ━━ 2026-02-20 (3개) ━━━━━━━━━━━━━━━━━  │
│ ...                                      │
└──────────────────────────────────────────┘
```

- "전체"가 기본 선택 (태그 필터 없음)
- 칩 탭 시 해당 태그로 필터 → 날짜 그룹/카운트도 필터 기준으로 갱신
- 캘린더 날짜 필터와 태그 필터를 동시에 사용 가능
- 검색은 태그명도 검색 대상에 포함

---

## 4. 단어 상세 화면

### 4.1 태그 보기

단어 상세에서 태그가 있으면 품사 아래에 칩으로 표시된다.

### 4.2 태그 편집

편집 모드에서 태그를 추가/제거할 수 있다.

```
┌──────────────────────────────────────────┐
│  태그                                    │
│  [JLPT N4 ✕] [음식 ✕]                   │
│  [새 태그 입력...          ] [추가]      │
└──────────────────────────────────────────┘
```

- 기존 태그는 칩으로 표시, ✕ 탭으로 제거
- 텍스트 입력 + "추가" 버튼으로 새 태그 추가
- 저장 시 태그 변경 포함하여 Drive 동기화

---

## 5. 단어 추가 화면

모바일에서 직접 단어를 추가할 때 태그를 지정할 수 있다.

```
┌──────────────────────────────────────────┐
│  단어 *                                  │
│  [日本語                        ]        │
│  읽기 (히라가나)                         │
│  [にほんご                      ]        │
│  뜻 (한국어)                             │
│  [일본어                        ]        │
│  품사                                    │
│  [名詞                          ]        │
│  메모                                    │
│  [학습 메모...                  ]        │
│  태그                                    │
│  [JLPT N4 ✕]                            │
│  [새 태그 입력...          ] [추가]      │
│                                          │
│          [ 저장 ]                        │
└──────────────────────────────────────────┘
```

- 태그 입력 없이도 저장 가능 (빈 태그)
- 기존 태그 자동완성 미제공 (모바일 추가는 보조 기능, 확장에서 주로 추가)

---

## 6. 학습 화면

### 6.1 학습 모드 선택

오늘의 학습(SRS) 선택 시, 태그 필터 옵션이 추가된다.

```
┌─────────────────────────┐
│  학습                    │
│                         │
│  📚 오늘의 학습          │
│     복습 32개 + 새 5개   │
│                     →   │
│                         │
│  ─── 태그별 학습 ───    │
│                         │
│  JLPT N4    복습 12개   │
│  음식        복습 5개   │
│  드라마      복습 8개   │
│  태그없음    복습 7개   │
│                         │
│  🔀 자유 복습            │
│     날짜 범위 선택      │
│                     →   │
└─────────────────────────┘
```

- **"오늘의 학습"**: 기존과 동일, 전체 due + new 카드 (태그 무관)
- **태그별 학습**: 각 태그의 due 카드 수 표시, 탭 시 해당 태그만으로 SRS 세션 시작
- "태그없음" 항목으로 미분류 단어도 집중 학습 가능
- 태그별 학습에서도 SRS 알고리즘(FSRS) 동일 적용

### 6.2 태그 필터 세션

태그를 선택하면 해당 태그의 단어만으로 SRS 세션이 시작된다. 세션 헤더에 필터 중인 태그가 표시된다.

```
┌─────────────────────────┐
│  ✕ 종료  JLPT N4 학습   │
│  N:3  L:1  R:8          │
│                         │
│  ┌───────────────────┐  │
│  │                   │  │
│  │    食べる          │  │
│  │                   │  │
│  │  탭하여 정답 확인  │  │
│  │                   │  │
│  └───────────────────┘  │
└─────────────────────────┘
```

- 학습 완료 후 결과 화면에 태그명 표시
- 세션 중 카드 표시는 기존과 동일 (태그 칩은 카드에 표시하지 않음 — 학습 집중)

---

## 7. 제한사항

| 항목 | 설명 |
|------|------|
| 복수 태그 필터 | 한 번에 하나의 태그만 선택 가능 (1차 구현) |
| 태그 이름 변경 | 미지원 — 개별 단어에서 수동 수정 |
| 태그 일괄 삭제 | 미지원 — 개별 단어에서 수동 제거 |
| 태그 자동 제안 | 모바일 단어 추가/편집 시 기존 태그 autocomplete 미제공 |
| 캘린더 히트맵 태그 필터 | 캘린더 마킹은 전체 단어 기준 (태그별 마킹 미지원) |
