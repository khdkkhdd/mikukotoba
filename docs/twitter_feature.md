# Twitter(X) 번역 기능 명세서

> JP Helper - Twitter(X) 사이트에 특화된 번역 기능의 사용자 관점 기능 명세
> 작성일: 2026-02-19

---

## 1. 기능 개요

Twitter(X)에서 일본어 트윗, 유저 정보, 트렌딩 토픽을 한국어로 번역하여 학습을 돕는 기능.

**핵심 가치**: "타임라인을 읽고 → 후리가나로 읽기를 익히고 → 번역으로 이해한다"의 학습 흐름을 트위터 브라우징에 자연스럽게 통합

**이 문서의 범위**: Twitter(X)에 특화된 트윗/유저/트렌드 번역과 표시 방식을 다룬다. 번역 엔진 선택, 호버/인라인/후리가나 표시 방식의 공통 동작, 설정 페이지 등은 `translation_feature.md`를 참고한다.

**지원 도메인**: `x.com`, `twitter.com`

---

## 2. 번역 대상

트위터에서 번역되는 콘텐츠는 크게 **트윗**, **유저 정보**, **트렌딩 토픽** 3가지 영역으로 나뉜다.

### 2.1 트윗

| 요소 | 설명 | 번역 시점 |
|------|------|----------|
| **트윗 본문** | 타임라인, 상세 페이지, 검색 결과 등에 표시되는 트윗 텍스트 | 화면에 나타날 때 |
| **링크 카드** | 트윗에 첨부된 URL 프리뷰 카드의 제목·설명 | 화면에 나타날 때 |
| **투표 선택지** | 트윗에 포함된 투표(Poll)의 각 항목 | 화면에 나타날 때 |
| **인용 트윗** | 다른 트윗을 인용한 경우, 인용된 트윗의 본문도 동일하게 번역 | 화면에 나타날 때 |

### 2.2 유저 정보

| 요소 | 설명 | 번역 시점 |
|------|------|----------|
| **표시 이름** | 타임라인에서 트윗 상단에 표시되는 유저 이름 | 화면에 나타날 때 |
| **프로필 이름** | 프로필 페이지 헤더의 유저 이름 | 페이지 로드 즉시 |
| **자기소개 (Bio)** | 프로필 페이지의 자기소개 텍스트 | 페이지 로드 즉시 |
| **위치** | 프로필의 위치 정보 | 페이지 로드 즉시 |
| **팔로워/팔로잉 목록** | 팔로워·팔로잉 페이지의 각 유저 셀 (이름 + 바이오) | 스크롤하여 화면에 보일 때 |
| **리포스트 표시** | "○○さんがリポスト" 형태의 소셜 컨텍스트에서 유저 이름 부분 | 화면에 나타날 때 |

### 2.3 트렌딩 토픽

| 요소 | 설명 | 번역 시점 |
|------|------|----------|
| **트렌딩 토픽명** | "いま"のトレンド 등에 표시되는 토픽 키워드 | 화면에 나타날 때 |

---

## 3. 요소별 표시 방식

트위터의 각 요소는 성격에 따라 서로 다른 표시 방식을 사용한다. 웹페이지 모드(호버/인라인/후리가나 전용/OFF) 설정에 따라 동작이 달라진다.

### 3.1 트윗 본문

트윗 본문은 트위터에서 가장 핵심적인 콘텐츠이다.

**인라인 모드**:
- 원문 트윗 바로 아래에 번역 블록이 삽입된다.
- 번역 블록 구성: 후리가나가 붙은 원문 + 로마자 + 한국어 번역 + 엔진 배지 + 재번역 버튼
- 한국어 번역은 **블러(스포일러) 처리**되어 숨겨지며, 클릭하면 보인다 → "먼저 스스로 해석해보기" 학습 흐름.
- 원문 트윗은 수정하지 않고 그대로 유지된다.

**후리가나 전용 모드**:
- 후리가나가 붙은 원문 클론이 생성되어 원문 아래에 표시된다.
- 마우스를 올리면 호버 팝업으로 번역을 확인할 수 있다.
- 번역 블록은 삽입되지 않는다.

**호버 모드**:
- 트윗 본문에 점선 밑줄이 표시되어 호버 가능한 요소임을 알린다.
- 마우스를 올리면 팝업에 로마자 + 한국어 번역 + 엔진 배지 + 재번역 버튼이 표시된다.

### 3.2 유저 표시 이름

타임라인의 트윗 상단, 리포스트 표시 등에 나타나는 유저 이름.

- **모든 모드**에서 **호버 팝업**으로 번역이 표시된다.
- 짧은 텍스트이므로 인라인 삽입 대신 호버로 간결하게 처리한다.
- 후리가나 전용 모드에서는 후리가나가 붙은 버전이 호버 팝업에 표시된다.

### 3.3 유저 자기소개 (Bio)

프로필 페이지의 자기소개 텍스트.

**인라인 모드**:
- 자기소개 아래에 번역 블록이 삽입된다.
- 후리가나가 붙은 원문 + 로마자 + 한국어 번역.

**후리가나 전용 모드 / 호버 모드**:
- 호버 팝업으로 번역이 표시된다.
- 후리가나 전용 모드에서는 후리가나가 붙은 버전이 팝업에 포함된다.

### 3.4 유저 위치

프로필 페이지의 위치 정보.

- **모든 모드**에서 **호버 팝업**으로 번역이 표시된다.

### 3.5 팔로워/팔로잉 목록 셀

팔로워·팔로잉 페이지에서 각 유저를 보여주는 셀.

- **이름**: 호버 팝업으로 번역 표시.
- **바이오 미리보기**: 인라인 모드에서는 바이오 아래에 컴팩트한 번역 블록 삽입, 그 외 모드에서는 호버 팝업.

### 3.6 링크 카드

트윗에 첨부된 URL 프리뷰 카드.

- 카드 내부 하단에 작은 글씨로 번역이 삽입된다.
- 카드의 기존 레이아웃을 최대한 유지하면서 번역을 추가한다.

### 3.7 투표 선택지

트윗에 포함된 투표(Poll)의 각 항목.

- 선택지 옆에 **괄호** 형태로 번역이 표시된다. (예: `朝ごはん (아침밥)`)
- 투표 UI를 방해하지 않도록 간결하게 표시한다.

### 3.8 트렌딩 토픽

"いま"のトレンド 등에 표시되는 토픽 키워드.

- 토픽명 옆에 **괄호** 형태로 번역이 표시된다. (예: `桜の季節 (벚꽃 시즌)`)
- 카테고리 라벨("エンタメ · トレンド" 등)이나 게시물 수("1,234件のポスト")는 번역 대상이 아니다.

---

## 4. 번역 제외 대상

다음은 번역하지 않는다:

| 항목 | 설명 |
|------|------|
| **트위터 UI 텍스트** | "ホーム", "通知", "いいね", "リポスト", "削除" 등 트위터 자체 인터페이스 |
| **작성 영역** | 트윗 작성 창, 답글 입력 영역 등 편집 가능한 곳 |
| **@handle** | `@username` 형태의 핸들 |
| **URL** | 트윗에 포함된 링크 주소 |
| **숫자/카운트** | 좋아요 수, 리트윗 수, 답글 수 등 |
| **설정/로그인 페이지** | 트위터 설정이나 로그인 관련 UI |
| **트렌드 카테고리** | "エンタメ · トレンド" 등의 분류 라벨 |
| **트렌드 게시물 수** | "1,234件のポスト" 등의 수치 |

---

## 5. 일본어 판별

### 5.1 긴 텍스트 (트윗 본문, 자기소개 등)

- 요소에 `lang="ja"` 속성이 있으면 일본어로 판별한다.
- `lang` 속성이 없으면 텍스트에 히라가나·카타카나가 포함되어 있는지로 판별한다.

### 5.2 짧은 텍스트 (유저 이름, 트렌딩 토픽 등)

- 짧은 텍스트는 CJK 문자(한자, 히라가나, 카타카나)의 비율이 일정 이상인 경우에만 일본어로 인식한다.
- 영어 이름이나 이모지로만 이루어진 유저 이름은 번역 대상에서 제외된다.

---

## 6. 동적 콘텐츠 대응

### 6.1 무한 스크롤

트위터 타임라인은 스크롤할 때 새 트윗을 계속 로드한다. JP Helper는 새로 나타나는 요소를 자동으로 감지하여 번역한다.

### 6.2 가상 스크롤

트위터는 가상 스크롤을 사용하여 화면 밖의 요소를 DOM에서 제거하고, 다시 화면에 들어오면 재생성한다. JP Helper는 이를 대응한다:

- 재생성된 요소라도 이전에 번역한 결과가 캐시에 있으면 즉시 재삽입한다.
- 캐시 키로 트윗 URL, 유저 핸들 등을 사용하여, 같은 콘텐츠가 다시 나타났을 때 API 호출 없이 번역을 복원한다.

### 6.3 텍스트 변경 감지

"더 보기(Show more)" 클릭으로 긴 트윗이 펼쳐지는 등 텍스트 내용이 동적으로 변경되는 경우를 감지한다. 텍스트가 변경되면 이전 번역을 제거하고 새로 번역한다.

### 6.4 SPA 네비게이션

트위터는 SPA(Single Page Application)이므로 페이지 이동 시 전체 페이지가 새로 로드되지 않는다. 홈 → 프로필 → 검색 등으로 이동해도 JP Helper가 재시작 없이 새 콘텐츠를 감지하여 번역한다.

---

## 7. 지원 페이지

### 7.1 현재 지원되는 페이지

| 페이지 | 번역 대상 |
|--------|----------|
| **홈 타임라인** | 트윗, 유저명, 리포스트 표시, 트렌딩 토픽(사이드바) |
| **트윗 상세** | 원래 트윗 + 답글 스레드 |
| **프로필 페이지** | 유저명, 바이오, 위치 + 해당 유저의 트윗 |
| **팔로워/팔로잉** | 유저 목록 셀 (이름 + 바이오) |
| **검색/Explore** | 검색 결과 트윗, 트렌딩 토픽 |
| **알림 페이지** | 알림에 포함된 트윗 |
| **북마크 페이지** | 북마크한 트윗 |
| **리스트 페이지** | 리스트 내 트윗 |
| **커뮤니티 페이지** | 커뮤니티 내 트윗 |
| **인용 트윗 목록** | 인용 트윗 |
| **리트윗/좋아요 목록** | 유저 목록 셀 |

### 7.2 지원되지 않는 페이지/기능

| 페이지/기능 | 설명 |
|------------|------|
| **DM (메시지)** | 1:1 메시지 번역 미지원 |
| **Grok** | AI 응답 번역 미지원 |
| **Articles (장문)** | 장문 게시물 번역 미지원 |
| **Spaces** | 음성 대화방 관련 텍스트 미지원 |
| **이미지 ALT 텍스트** | 이미지 대체 텍스트 미지원 |
| **사진/동영상 뷰어 오버레이** | 미디어 라이트박스에서는 번역 미표시 |

---

## 8. 호버 팝업 동작

트위터에서 호버 팝업은 다음과 같이 동작한다:

- **마우스 올림 → 잠시 지연 → 팝업 표시**: 스크롤 중 의도치 않게 팝업이 뜨는 것을 방지하기 위해 약간의 지연이 있다.
- **팝업 유지**: 마우스가 원래 텍스트 또는 팝업 위에 있는 동안 유지.
- **팝업 닫기**: 마우스를 벗어나면 잠시 후 사라짐. ESC 키로 즉시 닫기.
- **텍스트 선택 가능**: 팝업 안의 번역문을 드래그로 선택·복사할 수 있으며, 선택 중에는 팝업이 사라지지 않는다.
- **스크롤 격리**: 팝업 안에서 스크롤해도 뒤쪽 타임라인이 같이 스크롤되지 않는다.
- **화면 밖 자동 조정**: 화면 가장자리에서 팝업이 화면 밖으로 넘어가면 위치가 자동으로 조정된다.

---

## 9. 설정 변경 시 동작

### 9.1 실시간 반영

팝업이나 설정 페이지에서 설정을 변경하면 트위터 탭에 즉시 반영된다.

- **표시 옵션 변경** (후리가나/로마자/번역 토글): 모든 핸들러가 재시작되어 새 설정으로 다시 번역이 적용된다.
- **모드 변경** (호버 ↔ 인라인 ↔ 후리가나 전용): 기존 번역이 모두 제거되고, 새 모드로 다시 번역이 시작된다.
- **확장 ON/OFF**: 모든 번역 요소가 즉시 나타나거나 제거된다.

---

## 10. 제한사항

| 항목 | 설명 |
|------|------|
| 일본어만 번역 | 다른 언어의 트윗은 번역 대상이 아님 |
| DM 미지원 | 다이렉트 메시지의 텍스트는 번역되지 않음 |
| Grok/Spaces/Articles 미지원 | 해당 페이지의 콘텐츠는 번역되지 않음 |
| 이미지 내 텍스트 미지원 | 이미지에 포함된 일본어 텍스트는 번역 불가 (OCR 미탑재) |
| 미디어 뷰어 미지원 | 사진/동영상을 전체화면으로 열었을 때 해당 트윗의 번역이 표시되지 않음 |
| 트위터 자체 번역과 중복 가능 | 트위터의 "이 트윗 번역하기" 버튼과 JP Helper 번역이 동시에 표시될 수 있음 |
| 비로그인 상태 미보장 | 로그인되지 않은 트위터 페이지에서는 DOM 구조가 다를 수 있음 |
| 동시 번역 부하 | 타임라인에 많은 일본어 트윗이 있을 때 인라인 모드 사용 시 다수의 API 호출이 발생할 수 있음 |
| TweetDeck 미지원 | `pro.twitter.com` 등 TweetDeck 인터페이스에서는 동작하지 않음 |

---

## 11. To-Do: 학습 효과 개선을 위한 추가 기능 제안

### 높은 우선순위

| 기능 | 설명 | 근거 |
|------|------|------|
| **DM 번역** | 1:1 다이렉트 메시지의 일본어 텍스트 번역 (기본 OFF, 선택적 활성화) | 일본인 친구와 소통할 때 학습 기회. 프라이버시 고려하여 기본 OFF |
| **트위터 자체 번역 충돌 방지** | 트위터의 "이 트윗 번역하기" 버튼을 숨기거나, JP Helper가 활성화된 상태에서 중복 표시 방지 | 두 번역이 동시에 표시되면 혼란스러움 |
| **단어 클릭 → 단어장 추가** | 번역 결과에서 개별 단어를 클릭하여 단어장에 바로 추가. 예문에는 해당 트윗 문장이 자동 입력 | 타임라인 브라우징 중 발견한 단어를 즉시 저장하여 학습 사이클 완성 |
| **이미지 ALT 텍스트 번역** | 이미지에 작성자가 입력한 ALT 텍스트의 일본어 번역 | 접근성 텍스트도 학습 자료로 활용 가능 |

### 중간 우선순위

| 기능 | 설명 | 근거 |
|------|------|------|
| **스레드 전체 보기** | 긴 스레드를 한 페이지에서 모아보면서 번역 결과를 연속으로 읽을 수 있는 뷰어 | 맥락이 이어지는 스레드를 끊김 없이 학습 |
| **Articles(장문) 번역** | 트위터 Articles(장문 게시물)의 본문 번역 | 블로그 형식의 깊이 있는 일본어 콘텐츠 학습 |
| **미디어 뷰어 번역** | 사진/동영상 라이트박스에서도 해당 트윗의 번역을 함께 표시 | 미디어 감상 흐름을 끊지 않고 번역 확인 |
| **번역 난이도 표시** | 각 트윗의 JLPT 추정 레벨을 표시 (색상 배지: N5=초록 ~ N1=빨강) | 자신의 수준에 맞는 계정을 찾거나, 학습 진도 파악 |
| **리스트별 번역 ON/OFF** | 특정 리스트에서만 번역을 활성화하는 옵션 | 학습용 리스트를 만들어 집중 학습, 일반 리스트에서는 번역 비활성화 |

### 낮은 우선순위

| 기능 | 설명 | 근거 |
|------|------|------|
| **Grok 응답 번역** | Grok AI의 일본어 응답 번역 | Grok과 일본어로 대화할 때 학습 보조 |
| **Spaces 제목/설명 번역** | Spaces 음성 채팅방의 제목과 설명 번역 | 참여할 Spaces를 탐색할 때 내용 파악 |
| **타임라인 일본어 필터** | 일본어 트윗만 하이라이트하거나 필터링하는 기능 | 다국어 팔로잉 환경에서 일본어 학습 콘텐츠를 빠르게 찾기 |
| **트윗 저장 + 복습** | 학습하고 싶은 트윗을 별도로 저장하여 나중에 복습할 수 있는 기능 | 단어장의 트윗 버전. 문장 단위 학습 기록 |
| **TweetDeck 지원** | `pro.twitter.com` 다중 컬럼 인터페이스에서 번역 | TweetDeck으로 일본어 계정을 모니터링하는 사용자 지원 |
| **번역 비교 보기** | Papago와 AI 번역 결과를 나란히 비교 | 번역 뉘앙스 차이를 통한 언어 감각 향상 |
